import{j as s}from"./jsx-runtime.D_zvdyIk.js";import{B as l}from"./button.Db3GhhwO.js";import{D as w,a as S,b as C,c as F,d as D,e as N}from"./dialog.CUSjS07t.js";import{o as j,s as t,u as h,a as f,F as g,b as m,c,d,e as u,f as x}from"./types.Cnw1M-29.js";import{I as p}from"./input.CNO_L4t5.js";import{a as y}from"./client.BsjXsuL3.js";import{r as E,R as L}from"./index.DQLiH3RP.js";import{L as b}from"./loader-circle.BgR7_kSm.js";import{C as R,a as T,b as v,c as I,e as k,d as B}from"./card.gw5NK2rv.js";import{n as H}from"./router.DnZMHVsn.js";import{t as P}from"./index.n6X7SrFA.js";import"./createLucideIcon.DxLV4sYg.js";import"./index.CKCoq1tz.js";import"./index.B8Cg28y-.js";import"./index.C-Vi51-h.js";import"./index.CKz0Jdri.js";const V=j({email:t().email().nonempty()});function $(){const[o,a]=E.useState(!1),r=h({resolver:f(V),defaultValues:{email:""}});async function n(e){a(!0),y.requestPasswordReset({email:e.email,redirectTo:"/auth/reset"},{onSuccess:()=>a(!1),onError:({error:i})=>{console.error(i),a(!1)}})}return s.jsxs(w,{children:[s.jsx(S,{className:"hover:underline underline-offset-4 text-sm",children:"Forgot your password?"}),s.jsxs(C,{children:[s.jsxs(F,{children:[s.jsx(D,{children:"Forgot your password?"}),s.jsx(N,{children:"Enter your email below to reset your password."})]}),s.jsx(g,{...r,children:s.jsxs("form",{className:"space-y-4",onSubmit:r.handleSubmit(n),children:[s.jsx(m,{control:r.control,name:"email",render:({field:e})=>s.jsxs(c,{children:[s.jsx(d,{children:"Email"}),s.jsx(u,{children:s.jsx(p,{placeholder:"you@example.com",...e})}),s.jsx(x,{})]})}),s.jsxs(l,{type:"submit",disabled:o,className:"w-full",children:[o&&s.jsx(b,{className:"animate-spin"}),"Send"]})]})})]})]})}const q=j({email:t().email().nonempty(),password:t().nonempty()});function rs(){const[o,a]=L.useState(!1),r=h({resolver:f(q),defaultValues:{email:"",password:""}});async function n(e){a(!0),y.signIn.email({email:e.email,password:e.password},{onResponse:()=>a(!1),onSuccess:()=>H("/"),onError:({error:i})=>{P.error(`Failed to sign in: ${i.message}`)}})}return s.jsxs(R,{className:"w-full max-w-sm self-center my-auto",children:[s.jsxs(T,{children:[s.jsx(v,{children:"Login to your account"}),s.jsx(I,{children:"Enter your email below to login to your account."}),s.jsx(k,{children:s.jsx("a",{href:"/auth/signup",children:s.jsx(l,{variant:"link",children:"Sign up"})})})]}),s.jsx(B,{children:s.jsx(g,{...r,children:s.jsxs("form",{className:"flex flex-col gap-8",onSubmit:r.handleSubmit(n),children:[s.jsx(m,{control:r.control,name:"email",render:({field:e})=>s.jsxs(c,{children:[s.jsx(d,{children:"Email"}),s.jsx(u,{children:s.jsx(p,{placeholder:"you@example.com",...e})}),s.jsx(x,{})]})}),s.jsx(m,{control:r.control,name:"password",render:({field:e})=>s.jsxs(c,{children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(d,{children:"Password"}),s.jsx("span",{className:"ml-auto inline-block",children:s.jsx($,{})})]}),s.jsx(u,{children:s.jsx(p,{type:"password",...e})}),s.jsx(x,{})]})}),s.jsxs(l,{type:"submit",disabled:o,className:"w-full",children:[o&&s.jsx(b,{className:"animate-spin"}),"Sign in"]})]})})})]})}export{rs as default};
