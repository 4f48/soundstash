import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{B as r}from"./button.Db3GhhwO.js";import{C as p,a as C,b,c as y,d as L}from"./card.gw5NK2rv.js";import{a as n}from"./client.BsjXsuL3.js";import{n as N}from"./router.DnZMHVsn.js";import{r as i}from"./index.DQLiH3RP.js";import{c as k}from"./createLucideIcon.DxLV4sYg.js";import{L as o}from"./loader-circle.BgR7_kSm.js";import{C as w}from"./check.CnxoWnC8.js";/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],m=k("mail",S);function R({user:s}){if(!s)throw new Error("user is not defined");const[c,t]=i.useState(!1),[l,x]=i.useState(!1),[f,a]=i.useState(e.jsxs(e.Fragment,{children:[e.jsx(m,{})," Verify email"]})),[h,d]=i.useState(!1);function u(){if(!s)throw new Error("user is not defined");t(!0),n.requestPasswordReset({email:s.email,redirectTo:"/auth/reset"},{onSuccess:()=>t(!1),onError:({error:j})=>{console.error(j),t(!1)}})}function g(){x(!0),n.signOut(),setTimeout(()=>N("/"),1e3)}return e.jsxs(p,{className:"mx-3",children:[e.jsxs(C,{children:[e.jsx(b,{className:"scroll-m-20 text-3xl font-extrabold tracking-tight text-balance",children:"Account Settings"}),e.jsx(y,{children:"Manage your account, subscription, security and privacy."})]}),e.jsxs(L,{children:[e.jsxs("section",{children:[e.jsx("h1",{className:"scroll-m-20 border-b pb-2 text-xl font-semibold tracking-tight first:mt-0",children:"Account Details"}),e.jsxs("p",{children:["name: ",s?.name]}),e.jsxs("p",{children:["email: ",s?.email]}),e.jsxs("p",{children:["email verified: ",s?.emailVerified?"Yes":"No"]})]}),e.jsxs("section",{className:"flex flex-col items-start gap-2",children:[e.jsx("h1",{className:"scroll-m-20 border-b pb-2 w-full text-xl font-semibold tracking-tight first:mt-0",children:"Account Actions"}),e.jsxs("div",{className:"flex gap-2",children:[!s?.emailVerified&&e.jsx(r,{disabled:h,onClick:()=>{d(!0),a(e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"animate-spin"})," Verify email"]})),n.sendVerificationEmail({email:s.email,callbackURL:"/account"},{onSuccess:()=>{d(!1),a(e.jsxs(e.Fragment,{children:[e.jsx(w,{}),"Sent email"]})),setTimeout(()=>a(e.jsxs(e.Fragment,{children:[e.jsx(m,{})," Verify email"]})),5e3)}})},children:f}),e.jsxs(r,{variant:"outline",disabled:c,onClick:()=>u(),children:[c&&e.jsx(o,{className:"animate-spin"}),"Change password"]}),e.jsxs(r,{variant:"destructive",disabled:l,onClick:()=>g(),children:[l&&e.jsx(o,{className:"animate-spin"}),"Sign out"]})]})]})]})]})}export{R as default};
